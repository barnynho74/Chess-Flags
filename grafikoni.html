<!DOCTYPE html>
<html lang="hr">
<head>
    <!-- Leaflet CSS & JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grafikoni - Tally Counter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        h1, h2 {
            text-align: center;
            color: #333;
        }
        .back-button {
            padding: 8px 15px;
            cursor: pointer;
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 4px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        .back-button:hover {
            background-color: #d32f2f;
        }
        .chart-container {
            margin-top: 20px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .chart-row {
             display: flex;
             flex-wrap: wrap; /* Wrap on smaller screens */
             gap: 20px; /* Space between charts */
             margin-bottom: 20px;
         }
        .chart-half {
             flex: 1; /* Each chart takes half the space */
             min-width: 300px; /* Minimum width before wrapping */
         }
        .summary-stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            text-align: center;
            margin-bottom: 20px;
            font-size: 16px;
        }
        .summary-stats span {
            font-weight: bold;
            display: block; /* Ensure label and value are stacked */
        }
         .summary-stats .win { color: green; }
         .summary-stats .draw { color: orange; }
         .summary-stats .loss { color: red; }
         .summary-stats .total { color: #333; }

        /* Simple CSS Bar Chart Styles */
        .bar-chart {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .bar-chart li {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            height: 25px; /* Height of the bar area */
            font-size: 13px;
        }
        .bar-label {
            width: 150px; /* Adjust as needed for country names */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding-right: 10px;
            text-align: right;
            flex-shrink: 0; /* Prevent label from shrinking */
        }
         .bar-flag {
             font-size: 18px;
             margin-left: 5px; /* Space between bar and flag */
             order: 3; /* Show flag after the value */
         }
        .bar-wrapper {
            flex-grow: 1;
            height: 100%;
            background-color: #eee;
            border-radius: 3px;
            position: relative;
            min-width: 100px; /* Minimum width for the bar area */
            order: 1; /* Bar comes after label */
        }
        .bar {
            display: block;
            height: 100%;
            background-color: #4CAF50; /* Default bar color */
            border-radius: 3px;
            position: relative;
            transition: width 0.5s ease-in-out;
        }
        .bar-value {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            color: black;
            font-size: 11px;
            font-weight: bold;
            order: 2; /* Show value inside or near the bar */
            padding-left: 5px; /* Space between bar and value text if needed */
        }
        /* Different colors for bars */
        .bar-chart.win-percentage .bar { background-color: #2196F3; } /* Blue for win% */
        .bar-chart.total-matches .bar { background-color: #ff9800; } /* Orange for total matches */

        .min-games-note {
             font-size: 12px;
             color: #666;
             text-align: center;
             margin-top: -10px;
             margin-bottom: 15px;
         }
        .ratio-list {
             list-style: none;
             padding: 0;
             margin: 0;
         }
        .ratio-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        .ratio-list li:last-child {
             border-bottom: none;
         }
        .ratio-flag {
             font-size: 20px; /* Match flag size in other tables */
             margin-right: 10px;
        }
        .ratio-text {
            flex-grow: 1;
        }
        .ratio-text .country-name {
             font-weight: bold;
             color: #333;
        }
        .ratio-text .leading { color: green; }
        .ratio-text .trailing { color: red; }
        .ratio-text .even { color: orange; }

        /* Pie Chart Styles */
        .pie-chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); /* Responsive grid */
            gap: 30px; /* Space between pies */
            justify-items: center; /* Center pies in grid cells */
            align-items: start;
            padding: 10px;
        }
        .pie-container {
            text-align: center;
        }
        .pie-chart {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 10px auto; /* Center pie and space below */
            border: 1px solid #ccc; /* Optional border */
             /* Background will be set by JS */
        }
        .pie-label {
            font-weight: bold;
            font-size: 15px;
            margin-bottom: 5px;
        }
        .pie-legend {
             font-size: 12px;
             color: #555;
             list-style: none;
             padding: 0;
             margin: 0;
         }
        .pie-legend li {
             margin-bottom: 3px;
         }
        .pie-legend .win::before { content: "üü¢ "; }
        .pie-legend .draw::before { content: "üü† "; }
        .pie-legend .loss::before { content: "üî¥ "; }

        @media (max-width: 600px) {
             .summary-stats {
                 font-size: 14px;
                 gap: 10px;
             }
             .bar-label {
                 width: 100px;
                 font-size: 12px;
             }
             .bar-chart li {
                  height: 22px;
                  font-size: 12px;
             }
            .bar-flag {
                font-size: 16px;
            }
            .bar-value {
                 font-size: 10px;
             }
        }

    </style>
</head>
<body>
    <button class="back-button" id="backButton">‚Üê Natrag na brojaƒç</button>
    <h1>Grafiƒçki Prikazi</h1>

    <!-- Overall Summary -->
    <div class="chart-container">
        <h2>Ukupna Statistika</h2>
        <div class="summary-stats" id="summaryStats">
            <!-- Stats will be loaded here -->
            <p>Uƒçitavanje...</p>
        </div>
    </div>
    <div class="chart-container">
  <h2>Interaktivna karta svijeta</h2>
  <div id="map" style="height: 500px; width: 100%; border: 1px solid #ccc;"></div>
</div>


    <!-- Wrapper for Side-by-Side Bar Charts -->
    <div class="chart-row">
        <!-- Top 10 Most Played -->
        <div class="chart-container chart-half">
            <h2>Top 10 - Najvi≈°e odigranih</h2>
            <ul class="bar-chart total-matches" id="mostPlayedChart">
                <li>Uƒçitavanje...</li>
            </ul>
        </div>

        <!-- Top 10 Win Percentage -->
        <div class="chart-container chart-half">
            <h2>Top 10 - % Pobjeda</h2>
            <p class="min-games-note">(Min. 5 partija)</p>
            <ul class="bar-chart win-percentage" id="winPercentageChart">
                <li>Uƒçitavanje...</li>
            </ul>
        </div>
    </div>

    <!-- Continent Pie Charts -->
    <div class="chart-container">
        <h2>Statistika po Kontinentima (Pobjede/Remi/Porazi)</h2>
        <div class="pie-chart-grid" id="continentPieCharts">
            <!-- Pie charts will be loaded here -->
            <p>Uƒçitavanje...</p>
        </div>
    </div>

    <!-- International Pie Chart -->
    <div class="chart-container">
        <h2>Statistika - International</h2>
        <div class="pie-chart-grid" id="internationalPieChartContainer">
            <!-- International pie chart will be loaded here -->
            <p>Uƒçitavanje...</p>
        </div>
    </div>

    <!-- Win/Loss Ratios -->
     <div class="chart-container">
         <h2>Omjeri Pobjeda/Poraza (po Dr≈æavi)</h2>
         <ul class="ratio-list" id="winLossRatios">
             <!-- Ratios will be loaded here -->
             <li>Uƒçitavanje...</li>
         </ul>
     </div>

    <script>
        // Copy country list or load from shared source if available
        const allCountriesInfo = [
        { name: "Afganistan", flag: "üá¶üá´" },
            { name: "Albanija", flag: "üá¶üá±" },
            { name: "Al≈æir", flag: "üá©üáø" },
            { name: "Andora", flag: "üá¶üá©" },
            { name: "Angola", flag: "üá¶üá¥" },
            { name: "Antigva i Barbuda", flag: "üá¶üá¨" },
            { name: "Argentina", flag: "üá¶üá∑" },
            { name: "Armenija", flag: "üá¶üá≤" },
            { name: "Australija", flag: "üá¶üá∫" },
            { name: "Austrija", flag: "üá¶üáπ" },
            { name: "Azerbajd≈æan", flag: "üá¶üáø" },
            { name: "Bahami", flag: "üáßüá∏" },
            { name: "Bahrein", flag: "üáßüá≠" },
            { name: "Banglade≈°", flag: "üáßüá©" },
            { name: "Barbados", flag: "üáßüáß" },
            { name: "Belgija", flag: "üáßüá™" },
            { name: "Belize", flag: "üáßüáø" },
            { name: "Benin", flag: "üáßüáØ" },
            { name: "Bjelorusija", flag: "üáßüáæ" },
            { name: "Bolivija", flag: "üáßüá¥" },
            { name: "Bosna i Hercegovina", flag: "üáßüá¶" },
            { name: "Bocvana", flag: "üáßüáº" },
            { name: "Brazil", flag: "üáßüá∑" },
            { name: "Brunej", flag: "üáßüá≥" },
            { name: "Bugarska", flag: "üáßüá¨" },
            { name: "Burkina Faso", flag: "üáßüá´" },
            { name: "Burundi", flag: "üáßüáÆ" },
            { name: "Butan", flag: "üáßüáπ" },
            { name: "Cipar", flag: "üá®üáæ" },
            { name: "Crna Gora", flag: "üá≤üá™" },
            { name: "ƒåad", flag: "üáπüá©" },
            { name: "ƒåe≈°ka", flag: "üá®üáø" },
            { name: "ƒåile", flag: "üá®üá±" },
            { name: "Danska", flag: "üá©üá∞" },
            { name: "Dominika", flag: "üá©üá≤" },
            { name: "Dominikanska Republika", flag: "üá©üá¥" },
            { name: "D≈æibuti", flag: "üá©üáØ" },
            { name: "Egipat", flag: "üá™üá¨" },
            { name: "Ekvador", flag: "üá™üá®" },
            { name: "Ekvatorijalna Gvineja", flag: "üá¨üá∂" },
            { name: "Eritreja", flag: "üá™üá∑" },
            { name: "Estonija", flag: "üá™üá™" },
            { name: "Esvatini", flag: "üá∏üáø" },
            { name: "Etiopija", flag: "üá™üáπ" },
            { name: "Fid≈æi", flag: "üá´üáØ" },
            { name: "Filipini", flag: "üáµüá≠" },
            { name: "Finska", flag: "üá´üáÆ" },
            { name: "Francuska", flag: "üá´üá∑" },
            { name: "Gabon", flag: "üá¨üá¶" },
            { name: "Gambija", flag: "üá¨üá≤" },
            { name: "Gana", flag: "üá¨üá≠" },
            { name: "Grƒçka", flag: "üá¨üá∑" },
            { name: "Grenada", flag: "üá¨üá©" },
            { name: "Gruzija", flag: "üá¨üá™" },
            { name: "Gvajana", flag: "üá¨üáæ" },
            { name: "Gvatemala", flag: "üá¨üáπ" },
            { name: "Gvineja", flag: "üá¨üá≥" },
            { name: "Gvineja Bisau", flag: "üá¨üáº" },
            { name: "Haiti", flag: "üá≠üáπ" },
            { name: "Honduras", flag: "üá≠üá≥" },
            { name: "Hrvatska", flag: "üá≠üá∑" },
            { name: "Indija", flag: "üáÆüá≥" },
            { name: "Indonezija", flag: "üáÆüá©" },
            { name: "Irak", flag: "üáÆüá∂" },
            { name: "Iran", flag: "üáÆüá∑" },
            { name: "Irska", flag: "üáÆüá™" },
            { name: "Island", flag: "üáÆüá∏" },
            { name: "Italija", flag: "üáÆüáπ" },
            { name: "Izrael", flag: "üáÆüá±" },
            { name: "Jamajka", flag: "üáØüá≤" },
            { name: "Japan", flag: "üáØüáµ" },
            { name: "Jemen", flag: "üáæüá™" },
            { name: "Jordan", flag: "üáØüá¥" },
            { name: "Ju≈æna Koreja", flag: "üá∞üá∑" },
            { name: "Ju≈æna Afrika", flag: "üáøüá¶" },
            { name: "Ju≈æni Sudan", flag: "üá∏üá∏" },
            { name: "Kambod≈æa", flag: "üá∞üá≠" },
            { name: "Kamerun", flag: "üá®üá≤" },
            { name: "Kanada", flag: "üá®üá¶" },
            { name: "Katar", flag: "üá∂üá¶" },
            { name: "Kazahstan", flag: "üá∞üáø" },
            { name: "Kenija", flag: "üá∞üá™" },
            { name: "Kina", flag: "üá®üá≥" },
            { name: "Kipar", flag: "üá®üáæ" },
            { name: "Kirgistan", flag: "üá∞üá¨" },
            { name: "Kiribati", flag: "üá∞üáÆ" },
            { name: "Kolumbija", flag: "üá®üá¥" },
            { name: "Komori", flag: "üá∞üá≤" },
            { name: "Kongo", flag: "üá®üá¨" },
            { name: "Kongo, Demokratska Republika", flag: "üá®üá©" },
            { name: "Kostarika", flag: "üá®üá∑" },
            { name: "Kuba", flag: "üá®üá∫" },
            { name: "Kuvajt", flag: "üá∞üáº" },
            { name: "Kosovo", flag: "üáΩüá∞" },
            { name: "Laos", flag: "üá±üá¶" },
            { name: "Latvija", flag: "üá±üáª" },
            { name: "Lesoto", flag: "üá±üá∏" },
            { name: "Libanon", flag: "üá±üáß" },
            { name: "Liberija", flag: "üá±üá∑" },
            { name: "Libija", flag: "üá±üáæ" },
            { name: "Lihten≈°tajn", flag: "üá±üáÆ" },
            { name: "Litva", flag: "üá±üáπ" },
            { name: "Luksemburg", flag: "üá±üá∫" },
            { name: "Madagaskar", flag: "üá≤üá¨" },
            { name: "Maƒëarska", flag: "üá≠üá∫" },
            { name: "Malavi", flag: "üá≤üáº" },
            { name: "Maldivi", flag: "üá≤üáª" },
            { name: "Malezija", flag: "üá≤üáæ" },
            { name: "Mali", flag: "üá≤üá±" },
            { name: "Malta", flag: "üá≤üáπ" },
            { name: "Maroko", flag: "üá≤üá¶" },
            { name: "Marshallovi Otoci", flag: "üá≤üá≠" },
            { name: "Mauricijus", flag: "üá≤üá∫" },
            { name: "Mauritanija", flag: "üá≤üá∑" },
            { name: "Meksiko", flag: "üá≤üáΩ" },
            { name: "Mikronezija", flag: "üá´üá≤" },
            { name: "Mjanmar", flag: "üá≤üá≤" },
            { name: "Moldavija", flag: "üá≤üá©" },
            { name: "Monako", flag: "üá≤üá®" },
            { name: "Mongolija", flag: "üá≤üá≥" },
            { name: "Mozambik", flag: "üá≤üáø" },
            { name: "Namibija", flag: "üá≥üá¶" },
            { name: "Nauru", flag: "üá≥üá∑" },
            { name: "Nepal", flag: "üá≥üáµ" },
            { name: "Niger", flag: "üá≥üá™" },
            { name: "Nigerija", flag: "üá≥üá¨" },
            { name: "Nikaragva", flag: "üá≥üáÆ" },
            { name: "Nizozemska", flag: "üá≥üá±" },
            { name: "Norve≈°ka", flag: "üá≥üá¥" },
            { name: "Novi Zeland", flag: "üá≥üáø" },
            { name: "Njemaƒçka", flag: "üá©üá™" },
            { name: "Oman", flag: "üá¥üá≤" },
            { name: "Pakistan", flag: "üáµüá∞" },
            { name: "Palau", flag: "üáµüáº" },
            { name: "Panama", flag: "üáµüá¶" },
            { name: "Papua Nova Gvineja", flag: "üáµüá¨" },
            { name: "Paragvaj", flag: "üáµüáæ" },
            { name: "Peru", flag: "üáµüá™" },
            { name: "Palestina", flag: "üáµüá∏" },
            { name: "Poljska", flag: "üáµüá±" },
            { name: "Portugal", flag: "üáµüáπ" },
            { name: "Ruanda", flag: "üá∑üáº" },
            { name: "Rumunjska", flag: "üá∑üá¥" },
            { name: "Rusija", flag: "üá∑üá∫" },
            { name: "Salomonovi Otoci", flag: "üá∏üáß" },
            { name: "Salvador", flag: "üá∏üáª" },
            { name: "Samoa", flag: "üáºüá∏" },
            { name: "San Marino", flag: "üá∏üá≤" },
            { name: "Saudijska Arabija", flag: "üá∏üá¶" },
            { name: "Sej≈°eli", flag: "üá∏üá®" },
            { name: "Senegal", flag: "üá∏üá≥" },
            { name: "Saint Lucia", flag: "üá±üá®" },
            { name: "Sijera Leone", flag: "üá∏üá±" },
            { name: "Singapur", flag: "üá∏üá¨" },
            { name: "Sirija", flag: "üá∏üáæ" },
            { name: "Sjedinjene Ameriƒçke Dr≈æave", flag: "üá∫üá∏" },
            { name: "Sjeverna Makedonija", flag: "üá≤üá∞" },
            { name: "Sjeverna Koreja", flag: "Kim jong un" },
            { name: "Slovaƒçka", flag: "üá∏üá∞" },
            { name: "Slovenija", flag: "üá∏üáÆ" },
            { name: "Somalija", flag: "üá∏üá¥" },
            { name: "Srbija", flag: "üá∑üá∏" },
            { name: "Sudan", flag: "üá∏üá©" },
            { name: "Surinam", flag: "üá∏üá∑" },
            { name: "Svazi", flag: "üá∏üáø" },
            { name: "≈†panjolska", flag: "üá™üá∏" },
            { name: "≈†ri Lanka", flag: "üá±üá∞" },
            { name: "≈†vedska", flag: "üá∏üá™" },
            { name: "≈†vicarska", flag: "üá®üá≠" },
            { name: "≈†kotska", flag: "üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø" },
            { name: "Tajland", flag: "üáπüá≠" },
            { name: "Tajvan", flag: "üáπüáº" },
            { name: "Tanzanija", flag: "üáπüáø" },
            { name: "Togo", flag: "üáπüá¨" },
            { name: "Tonga", flag: "üáπüá¥" },
            { name: "Trinidad i Tobago", flag: "üáπüáπ" },
            { name: "Tunis", flag: "üáπüá≥" },
            { name: "Turkmenistan", flag: "üáπüá≤" },
            { name: "Turska", flag: "üáπüá∑" },
            { name: "Tuvalu", flag: "üáπüáª" },
            { name: "Uganda", flag: "üá∫üá¨" },
            { name: "Ukrajina", flag: "üá∫üá¶" },
            { name: "Ujedinjeni Arapski Emirati", flag: "üá¶üá™" },
            { name: "Ujedinjeno Kraljevstvo", flag: "üá¨üáß" },
            { name: "Urugvaj", flag: "üá∫üáæ" },
            { name: "Uzbekistan", flag: "üá∫üáø" },
            { name: "Vanuatu", flag: "üáªüá∫" },
            { name: "Vatikan", flag: "üáªüá¶" },
            { name: "Wales", flag: "üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø" },
            { name: "Venezuela", flag: "üáªüá™" },
            { name: "Vijetnam", flag: "üáªüá≥" },
            { name: "Zambija", flag: "üáøüá≤" },
            { name: "Zelenortska Republika", flag: "üá®üáª" },
            { name: "Zimbabve", flag: "üáøüáº" },
            { name: "International", flag: "üè≥Ô∏è" }
            ];

const countryContinents = {
    "Afganistan": "Azija", "Albanija": "Europa", "Al≈æir": "Afrika", "Andora": "Europa", "Angola": "Afrika",
    "Antigva i Barbuda": "Sjeverna Amerika", "Argentina": "Ju≈æna Amerika", "Armenija": "Azija", "Australija": "Oceanija",
    "Austrija": "Europa", "Azerbajd≈æan": "Azija", "Bahami": "Sjeverna Amerika", "Bahrein": "Azija", "Banglade≈°": "Azija",
    "Barbados": "Sjeverna Amerika", "Belgija": "Europa", "Belize": "Sjeverna Amerika", "Benin": "Afrika",
    "Bjelorusija": "Europa", "Bolivija": "Ju≈æna Amerika", "Bosna i Hercegovina": "Europa", "Bocvana": "Afrika",
    "Brazil": "Ju≈æna Amerika", "Brunej": "Azija", "Bugarska": "Europa", "Burkina Faso": "Afrika", "Burundi": "Afrika",
    "Butan": "Azija", "Cipar": "Azija", // Geographically Asia, culturally/politically often Europe
    "Crna Gora": "Europa", "ƒåad": "Afrika", "ƒåe≈°ka": "Europa", "ƒåile": "Ju≈æna Amerika", "Danska": "Europa",
    "Dominika": "Sjeverna Amerika", "Dominikanska Republika": "Sjeverna Amerika", "D≈æibuti": "Afrika", "Egipat": "Afrika", // Egypt spans Africa and Asia
    "Ekvador": "Ju≈æna Amerika", "Ekvatorijalna Gvineja": "Afrika", "Eritreja": "Afrika", "Estonija": "Europa",
    "Esvatini": "Afrika", "Etiopija": "Afrika", "Fid≈æi": "Oceanija", "Filipini": "Azija", "Finska": "Europa",
    "Francuska": "Europa", "Gabon": "Afrika", "Gambija": "Afrika", "Gana": "Afrika", "Grƒçka": "Europa",
    "Grenada": "Sjeverna Amerika", "Gruzija": "Azija", // Spans Europe and Asia
    "Gvajana": "Ju≈æna Amerika", "Gvatemala": "Sjeverna Amerika", "Gvineja": "Afrika", "Gvineja Bisau": "Afrika",
    "Haiti": "Sjeverna Amerika", "Honduras": "Sjeverna Amerika", "Hrvatska": "Europa", "Indija": "Azija",
    "Indonezija": "Azija", "Irak": "Azija", "Iran": "Azija", "Irska": "Europa", "Island": "Europa", "Italija": "Europa",
    "Izrael": "Azija", "Jamajka": "Sjeverna Amerika", "Japan": "Azija", "Jemen": "Azija", "Jordan": "Azija",
    "Ju≈æna Koreja": "Azija", "Ju≈æna Afrika": "Afrika", "Ju≈æni Sudan": "Afrika", "Kambod≈æa": "Azija",
    "Kamerun": "Afrika", "Kanada": "Sjeverna Amerika", "Katar": "Azija", "Kazahstan": "Azija", // Spans Europe and Asia
    "Kenija": "Afrika", "Kina": "Azija",
    "Kirgistan": "Azija", "Kiribati": "Oceanija", "Kolumbija": "Ju≈æna Amerika", "Komori": "Afrika", "Kongo": "Afrika",
    "Kongo, Demokratska Republika": "Afrika", "Kostarika": "Sjeverna Amerika", "Kuba": "Sjeverna Amerika",
    "Kuvajt": "Azija", "Kosovo": "Europa", "Laos": "Azija", "Latvija": "Europa", "Lesoto": "Afrika",
    "Libanon": "Azija", "Liberija": "Afrika", "Libija": "Afrika", "Lihten≈°tajn": "Europa", "Litva": "Europa",
    "Luksemburg": "Europa", "Madagaskar": "Afrika", "Maƒëarska": "Europa", "Malavi": "Afrika", "Maldivi": "Azija",
    "Malezija": "Azija", "Mali": "Afrika", "Malta": "Europa", "Maroko": "Afrika", "Marshallovi Otoci": "Oceanija",
    "Mauricijus": "Afrika", "Mauritanija": "Afrika", "Meksiko": "Sjeverna Amerika", "Mikronezija": "Oceanija",
    "Mjanmar": "Azija", "Moldavija": "Europa", "Monako": "Europa", "Mongolija": "Azija", "Mozambik": "Afrika",
    "Namibija": "Afrika", "Nauru": "Oceanija", "Nepal": "Azija", "Niger": "Afrika", "Nigerija": "Afrika",
    "Nikaragva": "Sjeverna Amerika", "Nizozemska": "Europa", "Norve≈°ka": "Europa", "Novi Zeland": "Oceanija",
    "Njemaƒçka": "Europa", "Oman": "Azija", "Pakistan": "Azija", "Palau": "Oceanija", "Panama": "Sjeverna Amerika",
    "Papua Nova Gvineja": "Oceanija", "Paragvaj": "Ju≈æna Amerika", "Peru": "Ju≈æna Amerika", "Palestina": "Azija",
    "Poljska": "Europa", "Portugal": "Europa", "Ruanda": "Afrika", "Rumunjska": "Europa", "Rusija": "Europa", // Spans Europe and Asia
    "Salomonovi Otoci": "Oceanija", "Salvador": "Sjeverna Amerika", "Samoa": "Oceanija", "San Marino": "Europa",
    "Saudijska Arabija": "Azija", "Sej≈°eli": "Afrika", "Senegal": "Afrika", "Saint Lucia": "Sjeverna Amerika",
    "Sijera Leone": "Afrika", "Singapur": "Azija", "Sirija": "Azija", "Sjedinjene Ameriƒçke Dr≈æave": "Sjeverna Amerika",
    "Sjeverna Makedonija": "Europa", "Sjeverna Koreja": "Azija", "Slovaƒçka": "Europa", "Slovenija": "Europa",
    "Somalija": "Afrika", "Srbija": "Europa", "Sudan": "Afrika", "Surinam": "Ju≈æna Amerika", "Esvatini": "Afrika", // Esvatini
    "≈†panjolska": "Europa", "≈†ri Lanka": "Azija", "≈†vedska": "Europa", "≈†vicarska": "Europa", "≈†kotska": "Europa",
    "Tajland": "Azija", "Tajvan": "Azija", "Tanzanija": "Afrika", "Togo": "Afrika", "Tonga": "Oceanija",
    "Trinidad i Tobago": "Ju≈æna Amerika", "Tunis": "Afrika", "Turkmenistan": "Azija", "Turska": "Azija", // Spans Europe and Asia
    "Tuvalu": "Oceanija", "Uganda": "Afrika", "Ukrajina": "Europa", "Ujedinjeni Arapski Emirati": "Azija",
    "Ujedinjeno Kraljevstvo": "Europa", "Urugvaj": "Ju≈æna Amerika", "Uzbekistan": "Azija", "Vanuatu": "Oceanija",
    "Vatikan": "Europa", "Wales": "Europa", "Venezuela": "Ju≈æna Amerika", "Vijetnam": "Azija", "Zambija": "Afrika",
    "Zelenortska Republika": "Afrika", "Zimbabve": "Afrika", "International": "Nepoznato"
};
const geoJsonToLocalNames = {
  "Afghanistan": "Afganistan",
  "Albania": "Albanija",
  "Algeria": "Al≈æir",
  "Andorra": "Andora",
  "Angola": "Angola",
  "Antigua and Barbuda": "Antigva i Barbuda",
  "Argentina": "Argentina",
  "Armenia": "Armenija",
  "Australia": "Australija",
  "Austria": "Austrija",
  "Azerbaijan": "Azerbajd≈æan",
  "Bahamas": "Bahami",
  "Bahrain": "Bahrein",
  "Bangladesh": "Banglade≈°",
  "Barbados": "Barbados",
  "Belgium": "Belgija",
  "Belize": "Belize",
  "Benin": "Benin",
  "Bhutan": "Butan",
  "Bolivia": "Bolivija",
  "Bosnia and Herzegovina": "Bosna i Hercegovina",
  "Botswana": "Bocvana",
  "Brazil": "Brazil",
  "Brunei": "Brunej",
  "Bulgaria": "Bugarska",
  "Burkina Faso": "Burkina Faso",
  "Burundi": "Burundi",
  "Cambodia": "Kambod≈æa",
  "Cameroon": "Kamerun",
  "Canada": "Kanada",
  "Cape Verde": "Zelenortska Republika",
  "Central African Republic": "Srednjoafriƒçka Republika",
  "Chad": "ƒåad",
  "Chile": "ƒåile",
  "China": "Kina",
  "Colombia": "Kolumbija",
  "Comoros": "Komori",
  "Congo": "Kongo",
  "Democratic Republic of the Congo": "Kongo, Demokratska Republika",
  "Costa Rica": "Kostarika",
  "Croatia": "Hrvatska",
  "Cuba": "Kuba",
  "Cyprus": "Cipar",
  "Czech Republic": "ƒåe≈°ka",
  "Denmark": "Danska",
  "Djibouti": "D≈æibuti",
  "Dominica": "Dominika",
  "Dominican Republic": "Dominikanska Republika",
  "Ecuador": "Ekvador",
  "Egypt": "Egipat",
  "El Salvador": "Salvador",
  "Equatorial Guinea": "Ekvatorijalna Gvineja",
  "Eritrea": "Eritreja",
  "Estonia": "Estonija",
  "Eswatini": "Esvatini",
  "Ethiopia": "Etiopija",
  "Fiji": "Fid≈æi",
  "Finland": "Finska",
  "France": "Francuska",
  "Gabon": "Gabon",
  "Gambia": "Gambija",
  "Georgia": "Gruzija",
  "Germany": "Njemaƒçka",
  "Ghana": "Gana",
  "Greece": "Grƒçka",
  "Grenada": "Grenada",
  "Guatemala": "Gvatemala",
  "Guinea": "Gvineja",
  "Guinea-Bissau": "Gvineja Bisau",
  "Guyana": "Gvajana",
  "Haiti": "Haiti",
  "Honduras": "Honduras",
  "Hungary": "Maƒëarska",
  "Iceland": "Island",
  "India": "Indija",
  "Indonesia": "Indonezija",
  "Iran": "Iran",
  "Iraq": "Irak",
  "Ireland": "Irska",
  "Israel": "Izrael",
  "Italy": "Italija",
  "Ivory Coast": "Obala Bjelokosti",
  "Jamaica": "Jamajka",
  "Japan": "Japan",
  "Jordan": "Jordan",
  "Kazakhstan": "Kazahstan",
  "Kenya": "Kenija",
  "Kiribati": "Kiribati",
  "North Korea": "Sjeverna Koreja",
  "South Korea": "Ju≈æna Koreja",
  "Kuwait": "Kuvajt",
  "Kyrgyzstan": "Kirgistan",
  "Laos": "Laos",
  "Latvia": "Latvija",
  "Lebanon": "Libanon",
  "Lesotho": "Lesoto",
  "Liberia": "Liberija",
  "Libya": "Libija",
  "Liechtenstein": "Lihten≈°tajn",
  "Lithuania": "Litva",
  "Luxembourg": "Luksemburg",
  "Madagascar": "Madagaskar",
  "Malawi": "Malavi",
  "Malaysia": "Malezija",
  "Maldives": "Maldivi",
  "Mali": "Mali",
  "Malta": "Malta",
  "Marshall Islands": "Marshallovi Otoci",
  "Mauritania": "Mauritanija",
  "Mauritius": "Mauricijus",
  "Mexico": "Meksiko",
  "Micronesia": "Mikronezija",
  "Moldova": "Moldavija",
  "Monaco": "Monako",
  "Mongolia": "Mongolija",
  "Montenegro": "Crna Gora",
  "Morocco": "Maroko",
  "Mozambique": "Mozambik",
  "Myanmar": "Mjanmar",
  "Namibia": "Namibija",
  "Nauru": "Nauru",
  "Nepal": "Nepal",
  "Netherlands": "Nizozemska",
  "New Zealand": "Novi Zeland",
  "Nicaragua": "Nikaragva",
  "Niger": "Niger",
  "Nigeria": "Nigerija",
  "North Macedonia": "Sjeverna Makedonija",
  "Norway": "Norve≈°ka",
  "Oman": "Oman",
  "Pakistan": "Pakistan",
  "Palau": "Palau",
  "Palestine": "Palestina",
  "Panama": "Panama",
  "Papua New Guinea": "Papua Nova Gvineja",
  "Paraguay": "Paragvaj",
  "Peru": "Peru",
  "Philippines": "Filipini",
  "Poland": "Poljska",
  "Portugal": "Portugal",
  "Qatar": "Katar",
  "Romania": "Rumunjska",
  "Russia": "Rusija",
  "Rwanda": "Ruanda",
  "Saint Lucia": "Saint Lucia",
  "Samoa": "Samoa",
  "San Marino": "San Marino",
  "Saudi Arabia": "Saudijska Arabija",
  "Senegal": "Senegal",
  "Serbia": "Srbija",
  "Seychelles": "Sej≈°eli",
  "Sierra Leone": "Sijera Leone",
  "Singapore": "Singapur",
  "Slovakia": "Slovaƒçka",
  "Slovenia": "Slovenija",
  "Solomon Islands": "Salomonovi Otoci",
  "Somalia": "Somalija",
  "South Africa": "Ju≈æna Afrika",
  "South Sudan": "Ju≈æni Sudan",
  "Spain": "≈†panjolska",
  "Sri Lanka": "≈†ri Lanka",
  "Sudan": "Sudan",
  "Suriname": "Surinam",
  "Sweden": "≈†vedska",
  "Switzerland": "≈†vicarska",
  "Syria": "Sirija",
  "Taiwan": "Tajvan",
  "Tajikistan": "Tad≈æikistan",
  "Tanzania": "Tanzanija",
  "Thailand": "Tajland",
  "Timor-Leste": "Istoƒçni Timor",
  "Togo": "Togo",
  "Tonga": "Tonga",
  "Trinidad and Tobago": "Trinidad i Tobago",
  "Tunisia": "Tunis",
  "Turkey": "Turska",
  "Turkmenistan": "Turkmenistan",
  "Tuvalu": "Tuvalu",
  "Uganda": "Uganda",
  "Ukraine": "Ukrajina",
  "United Arab Emirates": "Ujedinjeni Arapski Emirati",
  "United Kingdom": "Ujedinjeno Kraljevstvo",
  "United States of America": "Sjedinjene Ameriƒçke Dr≈æave",
  "Uruguay": "Urugvaj",
  "Uzbekistan": "Uzbekistan",
  "Vanuatu": "Vanuatu",
  "Vatican City": "Vatikan",
  "Venezuela": "Venezuela",
  "Vietnam": "Vijetnam",
  "Yemen": "Jemen",
  "Zambia": "Zambija",
  "Zimbabwe": "Zimbabve"
};


// Map za brzi dohvat zastave po imenu dr≈æave
        const countryFlags = allCountriesInfo.reduce((map, country) => {
            map[country.name] = country.flag;
            return map;
        }, {});

        // Uƒçitavanje podataka iz localStorage
        function loadData() {
            const savedData = localStorage.getItem('countryTallyData');
            return savedData ? JSON.parse(savedData) : {};
        }

        // Izraƒçunavanje statistika i priprema podataka za grafikone
        function processStats(tallyData) {
            let totalWins = 0;
            let totalDraws = 0;
            let totalLosses = 0;
            let totalMatchesOverall = 0;
            const countryStats = []; // Array to hold stats for each country
            const continentStats = {}; // Object to hold aggregated stats for each continent

             // Initialize continentStats based on the unique continent names in the map
             const uniqueContinents = [...new Set(Object.values(countryContinents))];
             uniqueContinents.forEach(continent => {
                 continentStats[continent] = { name: continent, wins: 0, draws: 0, losses: 0, total: 0 };
             });
             // Ensure 'Nepoznato' exists for unmapped countries
             if (!continentStats['Nepoznato']) {
                 continentStats['Nepoznato'] = { name: 'Nepoznato', wins: 0, draws: 0, losses: 0, total: 0 };
             }

            // --- Single Pass: Calculate country stats, overall totals, and continent stats ---
            for (const countryName in tallyData) {
                if (tallyData.hasOwnProperty(countryName)) {
                    const data = tallyData[countryName];
                    const totalMatches = data.wins + data.draws + data.losses;

                    // Skip country if no matches played
                    if (totalMatches === 0) continue;

                    const winPercentage = (data.wins / totalMatches) * 100;
                    const flag = countryFlags[countryName] || 'üè≥Ô∏è';
                    const continent = countryContinents[countryName] || 'Nepoznato';

                    // Accumulate overall totals (only once per country)
                    totalWins += data.wins;
                    totalDraws += data.draws;
                    totalLosses += data.losses;
                    totalMatchesOverall += totalMatches;

                    // Add to countryStats array (only once per country)
                    countryStats.push({
                        name: countryName,
                        flag: flag,
                        wins: data.wins,
                        draws: data.draws,
                        losses: data.losses,
                        totalMatches: totalMatches,
                        winPercentage: parseFloat(winPercentage.toFixed(1))
                    });

                    // Accumulate continent stats (only once per country)
                     // Check if continent exists (it should due to initialization)
                    if (continentStats[continent]) {
                        continentStats[continent].wins += data.wins;
                        continentStats[continent].draws += data.draws;
                        continentStats[continent].losses += data.losses;
                        continentStats[continent].total += totalMatches;
                    }
                }
            }

            // Filter out continents with no matches directly from the continentStats object
             const finalContinentStats = Object.fromEntries(
                 Object.entries(continentStats).filter(([_, stats]) => stats.total > 0)
             );

            return {
                overall: { wins: totalWins, draws: totalDraws, losses: totalLosses, total: totalMatchesOverall },
                countries: countryStats, // This now has only one entry per country
                continents: finalContinentStats,
                international: tallyData["International"] ? {
                    name: "International",
                    wins: tallyData["International"].wins || 0,
                    draws: tallyData["International"].draws || 0,
                    losses: tallyData["International"].losses || 0,
                    total: (tallyData["International"].wins || 0) + (tallyData["International"].draws || 0) + (tallyData["International"].losses || 0)
                } : null
            };
        }

        // Generiranje CSS bar chart-a
        function generateBarChart(containerId, data, valueKey, labelKey = 'name', unit = '', minMatchesThreshold = 0) {
            const container = document.getElementById(containerId);
            container.innerHTML = ''; // Clear loading indicator

            const filteredData = data
                .filter(item => item.totalMatches >= minMatchesThreshold) // Filter by minimum matches if needed
                .sort((a, b) => b[valueKey] - a[valueKey]) // Sort descending by the value key
                .slice(0, 10); // Take top 10

            if (filteredData.length === 0) {
                 container.innerHTML = '<li>Nema dovoljno podataka za prikaz.</li>';
                 return;
             }

            const maxValue = filteredData[0][valueKey]; // Max value for scaling

            filteredData.forEach(item => {
                const li = document.createElement('li');
                const barWidth = maxValue > 0 ? (item[valueKey] / maxValue * 100) : 0;

                // Determine if value text fits inside the bar
                const valueText = item[valueKey] + unit;
                let valueClass = "bar-value";
                // Simple check: if bar is very small, put text outside
                // This logic can be improved based on actual text length and bar width
                 if (barWidth < 15 && valueText.length > 2) {
                     valueClass += " outside"; // You might need CSS for .bar-value.outside
                 }


                li.innerHTML = `
                    <span class="bar-label">${item[labelKey]}</span>
                    <div class="bar-wrapper">
                        <span class="bar" style="width: ${barWidth}%;"></span>
                        <span class="${valueClass}">${valueText}</span>
                    </div>
                    <span class="bar-flag">${item.flag}</span>
                `;
                container.appendChild(li);
            });
        }

        // --- Glavna logika ---
        const tallyData = loadData();
        const stats = processStats(tallyData);

        // Prikaz ukupne statistike
        const summaryContainer = document.getElementById('summaryStats');
        summaryContainer.innerHTML = `
            <div><span class="win">${stats.overall.wins}</span>Pobjeda</div>
            <div><span class="draw">${stats.overall.draws}</span>Remija</div>
            <div><span class="loss">${stats.overall.losses}</span>Izgubljenih</div>
            <div><span class="total">${stats.overall.total}</span>Ukupno</div>
        `;

        // Generiraj grafikone
        generateBarChart('mostPlayedChart', stats.countries, 'totalMatches');
        generateBarChart('winPercentageChart', stats.countries, 'winPercentage', 'name', '%', 5); // Min 5 games for win%

        // --- Generiranje Omjera Pobjeda/Poraza ---
        function displayWinLossRatios(containerId, data) {
            const container = document.getElementById(containerId);
            container.innerHTML = ''; // Clear loading indicator

            const relevantCountries = data
                .filter(item => item.wins > 0 || item.losses > 0) // Only countries with wins or losses
                .sort((a, b) => a.name.localeCompare(b.name)); // Sort alphabetically by name

            if (relevantCountries.length === 0) {
                container.innerHTML = '<li>Nema podataka o pobjedama ili porazima.</li>';
                return;
            }

            relevantCountries.forEach(item => {
                const li = document.createElement('li');
                let ratioMessage = '';
                let ratioClass = '';

                if (item.wins > item.losses) {
                    ratioMessage = `Vodite <span class="leading">${item.wins}</span> naprama ${item.losses}`;
                    ratioClass = "leading";
                } else if (item.losses > item.wins) {
                    ratioMessage = `Gubite ${item.wins} naprama <span class="trailing">${item.losses}</span>`;
                     ratioClass = "trailing";
                } else { // item.wins === item.losses
                    ratioMessage = `Nerije≈°eno <span class="even">${item.wins}</span> naprama ${item.losses}`;
                    ratioClass = "even";
                }

                li.innerHTML = `
                    <span class="ratio-flag">${item.flag}</span>
                    <span class="ratio-text">
                       <span class="country-name">${item.name}</span>: ${ratioMessage}
                    </span>
                `;
                container.appendChild(li);
            });
        }

        // Prikaz omjera
        displayWinLossRatios('winLossRatios', stats.countries);


        // --- Generiranje Pie Chartova po Kontinentima ---
        function displayContinentPieCharts(containerId, continentData) {
             const container = document.getElementById(containerId);
             container.innerHTML = ''; // Clear loading

             const sortedContinents = Object.entries(continentData)
                 .sort(([nameA], [nameB]) => nameA.localeCompare(nameB)); // Sort continents alphabetically

             if (sortedContinents.length === 0) {
                 container.innerHTML = '<p>Nema podataka po kontinentima.</p>';
                 return;
             }

             sortedContinents.forEach(([continentName, data]) => {
                 if (data.total === 0) return; // Skip if no matches for this continent

                 const winPercent = (data.wins / data.total) * 100;
                 const drawPercent = (data.draws / data.total) * 100;
                 // Loss percentage is the remainder, handled by the gradient

                 const winEnd = winPercent;
                 const drawEnd = winPercent + drawPercent;

                 // Create the conic gradient string
                 // Use color variables or hex codes directly
                 const gradient = `conic-gradient(
                     green 0% ${winEnd.toFixed(1)}%,
                     orange ${winEnd.toFixed(1)}% ${drawEnd.toFixed(1)}%,
                     red ${drawEnd.toFixed(1)}% 100%
                 )`;

                 const pieContainer = document.createElement('div');
                 pieContainer.className = 'pie-container';

                 pieContainer.innerHTML = `
                     <div class="pie-label">${continentName} (${data.total})</div>
                     <div class="pie-chart" style="background: ${gradient};"></div>
                     <ul class="pie-legend">
                         <li class="win">${data.wins} Pobjeda (${winPercent.toFixed(1)}%)</li>
                         <li class="draw">${data.draws} Remija (${drawPercent.toFixed(1)}%)</li>
                         <li class="loss">${data.losses} Poraza (${(100 - winEnd - drawPercent).toFixed(1)}%)</li>
                     </ul>
                 `;
                 container.appendChild(pieContainer);
             });
         }

        // Prikaz Pie Chartova
        displayContinentPieCharts('continentPieCharts', stats.continents);

        // --- Generiranje Pie Charta za "International" ---
        function displaySingleCountryPieChart(containerId, countryData, countryName = "Dr≈æava") {
            const container = document.getElementById(containerId);
            container.innerHTML = ''; // Clear loading

            if (!countryData || countryData.total === 0) {
                container.innerHTML = `<p>Nema podataka za ${countryName}.</p>`;
                return;
            }

            const data = countryData;
            const winPercent = (data.wins / data.total) * 100;
            const drawPercent = (data.draws / data.total) * 100;
            const lossPercent = (data.losses / data.total) * 100;

            const winEnd = winPercent;
            const drawEnd = winPercent + drawPercent;

            const gradient = `conic-gradient(
                green 0% ${winEnd.toFixed(1)}%,
                orange ${winEnd.toFixed(1)}% ${drawEnd.toFixed(1)}%,
                red ${drawEnd.toFixed(1)}% 100%
            )`;

            const pieContainer = document.createElement('div');
            pieContainer.className = 'pie-container'; // Reuse existing styling

            pieContainer.innerHTML = `
                <div class="pie-label">${countryName} (${data.total})</div>
                <div class="pie-chart" style="background: ${gradient};"></div>
                <ul class="pie-legend">
                    <li class="win">${data.wins} Pobjeda (${winPercent.toFixed(1)}%)</li>
                    <li class="draw">${data.draws} Remija (${drawPercent.toFixed(1)}%)</li>
                    <li class="loss">${data.losses} Poraza (${lossPercent.toFixed(1)}%)</li>
                </ul>
            `;
            // Since pie-chart-grid expects multiple items, we wrap it or adjust CSS
            // For simplicity, we'll just append. It might look a bit off if it's the only item in a grid.
            // Consider adjusting the CSS for #internationalPieChartContainer if it only contains one chart.
            container.appendChild(pieContainer);
        }

        // Prikaz Pie Charta za International
        if (stats.international) {
            displaySingleCountryPieChart('internationalPieChartContainer', stats.international, 'International');
        } else {
            document.getElementById('internationalPieChartContainer').innerHTML = '<p>Nema podataka za International.</p>';
        }

        // Event listener za gumb Natrag
        document.getElementById('backButton').addEventListener('click', () => {
            window.location.href = 'tally counter.html'; // Link back to the main page
        });

    </script>
    <script>
// 1. Inicijalizacija karte
const map = L.map('map').setView([20, 0], 2); // centrirano na svijet

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap',
    maxZoom: 4,
}).addTo(map);

// 2. Bojanje dr≈æava prema statistici
// Bojanje prema postotku pobjeda
function getColorByWinPercentage(percentage, totalMatches) {
    if (percentage > 85.71) return '#24B9EF';
    if (percentage > 71.42) return '#0AB616'; 
    if (percentage > 57.14) return '#7FF072'; 
    if (percentage > 42.85) return '#FAEE5A'; 
    if (percentage > 28.57) return '#F39A6E'; 
    if (percentage > 14.28) return '#FF735A'; 
    if (percentage > 0)     return '#F94345'; 
    if (percentage === 0 && totalMatches > 0) return '#BE1623'; // Red if 0% wins but games played
    return '#f4f4f4';                                         // Grey (no data or 0% wins with 0 games)
}


// 3. Dohvati statistiku iz localStorage
const rawStats = localStorage.getItem('countryTallyData');
const countryStats = rawStats ? JSON.parse(rawStats) : {};

// 4. Uƒçitaj GeoJSON i oboji dr≈æave
fetch('countries.geo.json')
  .then(res => res.json())
  .then(geojson => {
    L.geoJSON(geojson, {
      style: feature => {
    const geoName = feature.properties.name;
    const localName = geoJsonToLocalNames[geoName] || geoName; // ako nema prijevod, koristi original
    const stat = countryStats[localName];


    let percentage = 0;
    let totalMatchesForColor = 0;
    if (stat) {
        totalMatchesForColor = stat.wins + stat.draws + stat.losses;
        percentage = totalMatchesForColor > 0 ? (stat.wins / totalMatchesForColor) * 100 : 0;
    }

    return {
        fillColor: getColorByWinPercentage(percentage, totalMatchesForColor),
        weight: 1,
        opacity: 1,
        color: 'white',
        fillOpacity: 0.8
    };
},

      onEachFeature: (feature, layer) => {
        const geoName = feature.properties.name;
        const localName = geoJsonToLocalNames[geoName] || geoName; // ako nema prijevod, koristi original
        const stat = countryStats[localName];

if (stat) {
          const totalMatches = stat.wins + stat.draws + stat.losses;
          const winPercentage = totalMatches > 0 ? ((stat.wins / totalMatches) * 100).toFixed(1) : "0.0";
          const popupContent = `
            <strong>${localName}</strong><br>
            ‚úÖ Pobjede: ${stat.wins}<br>
            ü§ù Remiji: ${stat.draws}<br>
            ‚ùå Porazi: ${stat.losses}<br>
            üî¢ Ukupno: ${totalMatches}<br>
            üìä % Pobjeda: ${winPercentage}%
          `;
          layer.bindPopup(popupContent);
} else {
          layer.bindPopup(`<strong>${localName}</strong><br>Nema podataka`);
}
      }
    }).addTo(map);
  })
  .catch(err => {
    console.error('Gre≈°ka pri uƒçitavanju GeoJSONa:', err);
  });
</script>

</body>
</html>